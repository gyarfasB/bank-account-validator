<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="main.css">
    <link rel="icon" type="image/svg+xml" href="assets/bank-favicon.svg">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Finlandica&display=swap');
        </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <title>Bankszámlaszám</title>
</head>
<body>
    <form method="POST">
        <fieldset>
            <legend>Írja be számlaszámát!<span id="bank-logo"></span></legend>
            <input type="text" id="num-area">
            <div class="button-area">
            <button type="button" class="btn btn-secondary" id="check-button">Ellenőrzés</button>
            <button type="reset" class="btn btn-light" id="resetButton">Törlés</button>
            </div>
            <div id="vonal" class="hidden"><span class="material-symbols-outlined check-visible check-invisible" id="positive">check_circle</span>
                <span class="material-symbols-outlined x-visible x-invisible" id="negative">cancel</span></div>
        </fieldset>
    </form>
    
    <script>
        var checkButton = document.getElementById('check-button')
        checkButton.addEventListener('click', function(){

            var ertek = document.getElementById('num-area').value
            ertek = ertek.replaceAll("-","")            

            var last8digit = ertek.slice(-16)
            var tomb = Array.from(last8digit)

            var tombSzam = []
            tomb.forEach(str => {
                tombSzam.push(Number(str))
            })
            
            var szorzas1 = tombSzam[0] * 9
            var szorzas2 = tombSzam[1] * 7
            var szorzas3 = tombSzam[2] * 3
            var szorzas4 = tombSzam[3] * 1
            var szorzas5 = tombSzam[4] * 9
            var szorzas6 = tombSzam[5] * 7
            var szorzas7 = tombSzam[6] * 3
            var szorzas8 = tombSzam[7] * 1
            var szorzas9 = tombSzam[8] * 9
            var szorzas10 = tombSzam[9] * 7
            var szorzas11 = tombSzam[10] * 3
            var szorzas12 = tombSzam[11] * 1
            var szorzas13 = tombSzam[12] * 9
            var szorzas14 = tombSzam[13] * 7
            var szorzas15 = tombSzam[14] * 3
            var szorzas16 = tombSzam[15] * 1

            var sum = szorzas1 + szorzas2 + szorzas3 + szorzas4 + szorzas5 + szorzas6 + szorzas7 + szorzas8 + szorzas9 +szorzas10 + szorzas11 + szorzas12 + szorzas13 + szorzas14 + szorzas15 + szorzas16

             /*  var sum = 0;
              for (var i = 0; i < tombSzam.length; i++) {
                sum += tombSzam[i]
              }
              */
            var checking = document.getElementById('positive')
            var closing = document.getElementById('negative')

              if(sum % 10 == 0){
                checking.classList.remove('check-visible')
                closing.classList.add('x-visible')
              }else{
                closing.classList.remove('x-visible')
                checking.classList.add('check-visible')
              }

        })
    </script>
</body>
</html>